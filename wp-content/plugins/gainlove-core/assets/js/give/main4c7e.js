"use strict";function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();!function(a){var e=function(){function e(){var t=this;_classCallCheck(this,e),a(document).on("click",'[data-toogle="gainlove-video"]',function(a){t.video(a)}),a(document).on("click",'[data-toogle="gainlove-gallery"]',function(a){t.gallery(a)}),a(document).on("click",".delete-campaign",function(a){confirm(gainlove.confirm)?t.delete_post(a):a.preventDefault()}),this.gallery_single(),this.single_tabs()}return _createClass(e,[{key:"video",value:function(e){var t=this;e.preventDefault();var n=a(e.currentTarget);n.data("loaded")?n.find(".ajax-gainlove-video a").trigger("click"):a.ajax({method:"POST",url:gainlove.ajaxurl,data:{action:"get_gainlove_video",give_id:n.data("gainlove-id")},beforeSend:function(){n.addClass("loading")},success:function(a){if(n.data("loaded",!0),a){n.append(t.renderVideoHTML(a));var e=n.find(".ajax-gainlove-video a");e.magnificPopup({disableOn:700,type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1}),e.trigger("click")}n.removeClass("loading")}})}},{key:"gallery",value:function(e){var t=this;e.preventDefault();var n=a(e.currentTarget);n.data("loaded")?n.find(".ajax-gainlove-gallery a:first-child").trigger("click"):a.ajax({method:"POST",url:gainlove.ajaxurl,data:{action:"get_gainlove_gallery",give_id:n.data("gainlove-id")},beforeSend:function(){n.addClass("loading")},success:function(a){if(n.data("loaded",!0),a){n.append(t.renderGalleryHTML(a));var e=n.find(".ajax-gainlove-gallery");e.magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0}}),e.find(">a:first-child").trigger("click")}n.removeClass("loading")}})}},{key:"delete_post",value:function(e){e.preventDefault();var t=a(e.currentTarget),n=t.closest(".profile-campaign__item");t.data("form_id")&&a.ajax({method:"POST",url:gainlove.ajaxurl,data:{action:"opal_give_delete_campaign",form_id:t.data("form_id")},beforeSend:function(){t.addClass("loading")},success:function(a){a&&n.remove()}})}},{key:"renderVideoHTML",value:function(a){return'<div class="ajax-gainlove-video"><a href="'+a+'"></a></div>'}},{key:"renderGalleryHTML",value:function(a){var e='<div class="ajax-gainlove-gallery">';for(var t in a)e+='<a href="'+a[t]+'"><img src="'+a[t]+'"></a>';return e+="</div>"}},{key:"gallery_single",value:function(){a(".single-give_forms .gallery").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(a){return a.el.attr("title")}}})}},{key:"single_tabs",value:function(){var e=a("#give-form-single-tab");e.length>0&&e.tabs()}}]),e}();a(document).ready(function(){new e});var t=new Object(function(){var e=a(".barometer"),t=function(e){var t=a(window).scrollTop(),n=t+a(window).height(),i=e.offset().top,r=i+e.height();return r>=t&&i<=n&&r<=n&&i>=t},n=function(a,e,t,n,i){var r,o=360/n*t,l=(90-o)*Math.PI/180,d=a+i*Math.cos(l),c=e-i*Math.sin(l);return r=n==t?[["M",a,e-i],["A",i,i,0,1,1,a-.01,e-i]]:[["M",a,e-i],["A",i,i,0,+(o>180),1,d,c]],{path:r}},i=function(a,e,t,n,i){var r;i>0&&(r=e.path().attr({stroke:a.data("progress-stroke"),"stroke-width":a.data("strokewidth")+1,arc:[t/2,n/2,0,100,t/2-8]}),r.animate({arc:[t/2,n/2,i,100,t/2-8]},1500,"easeInOut",function(){a.find("span").animate({opacity:1},300,"linear")}))},r=function(e){var r,o=e.data("width"),l=e.data("height"),d=Raphael(e[0],o,l),c=!1,s=e.data("progress")>100?100:e.data("progress");d.customAttributes.arc=n,r=d.path().attr({stroke:e.data("stroke"),"stroke-width":e.data("strokewidth"),arc:[o/2,l/2,0,100,o/2-8]}),e.parent().addClass("barometer-added"),r.animate({arc:[o/2,l/2,100,100,o/2-8]},1e3,function(){0===s&&e.find("span").animate({opacity:1},500,"linear")}),t(e)?(i(e,d,o,l,s),c=!0):a(window).scroll(function(){!1===c&&t(e)&&(i(e,d,o,l,s),c=!0)})};return{init:function(){e.each(function(){r(a(this))})},getBarometers:function(){return e},_drawBarometer:function(a,e,t,n,r){i(a,e,t,n,r)}}})();a(window).load(function(){t.init()})}(jQuery);
//# sourceMappingURL=main.js.map
